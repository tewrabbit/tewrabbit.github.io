<%
    var configRoot = config.root
    configRoot = (configRoot === null || configRoot === undefined || configRoot === '/') ? '' : configRoot;

    function renderLineIcon(icon) {
      var map = {
        'fas fa-home': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10.5 12 3l9 7.5"></path><path d="M5.5 9.5V21h13V9.5"></path></svg>',
        'fas fa-tags': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 13 13 20 4 11V4h7z"></path><circle cx="8.5" cy="8.5" r="1.2"></circle></svg>',
        'fas fa-bookmark': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 3h10v18l-5-3-5 3z"></path></svg>',
        'fas fa-archive': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><rect x="4" y="4" width="16" height="5" rx="2"></rect><path d="M6 9v11h12V9"></path><path d="M10 13h4"></path></svg>',
        'fas fa-user-circle': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="9"></circle><circle cx="12" cy="10" r="3"></circle><path d="M7.5 19c1.6-2.2 3.2-3.3 4.5-3.3S14.9 16.8 16.5 19"></path></svg>',
        'fas fa-address-book': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 4h11a2 2 0 0 1 2 2v14H7z"></path><path d="M7 4a2 2 0 0 0-2 2v14h2"></path><circle cx="14" cy="11" r="2.2"></circle><path d="M11 17c1-1.6 2.1-2.4 3-2.4s2 .8 3 2.4"></path></svg>',
        'fas fa-chevron-down': '<svg class="icon-line" viewBox="0 0 24 24" aria-hidden="true"><path d="M7 10l5 5 5-5"></path></svg>'
      };
      return map[icon] || null;
    }
%>

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  <% Object.keys(theme.menu).forEach(function(key) { %>
  <li class="hide-on-med-and-down nav-item">
    <% if(!theme.menu[key].children) { %>
    <a href="<%- url_for(theme.menu[key].url) %>" class="waves-effect waves-light">
      <% if (theme.menu[key].icon && theme.menu[key].icon.length > 0) { %>
      <% var svg = renderLineIcon(theme.menu[key].icon); %>
      <% if (svg) { %><%- svg %><% } else { %><i class="<%- theme.menu[key].icon %>" style="zoom: 0.6;"></i><% } %>
      <% } %>
      <span><%- __(key) %></span>
    </a>
    <% } else { %>
    <a href="<%- theme.menu[key].url %>" class="waves-effect waves-light">

      <% if (theme.menu[key].icon && theme.menu[key].icon.length > 0) { %>
      <% var svg2 = renderLineIcon(theme.menu[key].icon); %>
      <% if (svg2) { %><%- svg2 %><% } else { %><i class="<%- theme.menu[key].icon %>" style="zoom: 0.6;"></i><% } %>
      <% } %>
      <span><%- __(key) %></span>
      <%- renderLineIcon('fas fa-chevron-down') %>
    </a>
    <ul class="sub-nav menus_item_child ">
      <% for(let childrenLink of theme.menu[key].children){ %>
      <li>
        <a href="<%- url_for(childrenLink.url)%>">
          <% if (childrenLink.icon && childrenLink.icon.length > 0) { %>
          <% var svg3 = renderLineIcon(childrenLink.icon); %>
          <% if (svg3) { %><%- svg3 %><% } else { %><i class="<%- childrenLink.icon %>" style="margin-top: -20px; zoom: 0.6;"></i><% } %>
          <% } %>
          <span><%- childrenLink.name %></span>
        </a>
      </li>
      <% } %>
    </ul>
    <% } %>
  </li>
  <% }); %>
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="<%= __('search') %>" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<%- partial('_partial/mobile-nav') %>
